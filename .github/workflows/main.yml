name: Run Selenium On GitHub Action
on:
  workflow_dispatch:
jobs:
  scrape:
    runs-on: ubuntu-latest
    steps:
      - name: Checking out repo
        uses: actions/checkout@v2

      - name: Setting up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.9'

      - name: Installing package list
        run: apt list --installed
      - name: Removing previous chrome instances on runner
        run: |
          sudo apt purge google-chrome-stable
          pip install -r requirements.txt

      - name: Api üõéÔ∏è
        run: pytest tests/ui_tests/conferences/test_conferences_list_page.py::test_search_and_open_conference
        env:
          SERVER_IP: 'demo.vinteo.com'
          LOGIN: ${{ secrets.LOGIN }}
          PASSWORD: ${{ secrets.PASSWORD }}
        path: ./allure-results
